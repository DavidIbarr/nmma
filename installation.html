<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; nmma 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/nmma-docs.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Light curve fitting" href="fitting.html" />
    <link rel="prev" title="The Nuclear Multimessenger Astronomy (NMMA) framework" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> nmma
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#anaconda3">anaconda3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cloning-nmma">Cloning nmma</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-an-nmma-environment">Create an nmma environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-dependencies">Installing dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependency-conflicts">Dependency conflicts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-on-expanse-and-other-cluster-resources">Installation on expanse and other cluster resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fitting.html">Light curve fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to Contribute</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">nmma</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h1>
<section id="anaconda3">
<h2>anaconda3<a class="headerlink" href="#anaconda3" title="Permalink to this headline"></a></h2>
<p>First of all, we suggest you install <a class="reference external" href="https://docs.anaconda.com/anaconda/install/linux/">anaconda</a>, in order to avoid conflicts linked to different versions of pythons or pip. Afterwards, update conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">update</span> <span class="o">--</span><span class="nb">all</span>
</pre></div>
</div>
</section>
<section id="cloning-nmma">
<h2>Cloning nmma<a class="headerlink" href="#cloning-nmma" title="Permalink to this headline"></a></h2>
<p>Then, you should go ahead and git clone the repository. Note that we link below to the main branch, but suggest making changes on your own fork (please also see our <a class="reference external" href="./contributing.html">contributing guide</a>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">nuclear</span><span class="o">-</span><span class="n">multimessenger</span><span class="o">-</span><span class="n">astronomy</span><span class="o">/</span><span class="n">nmma</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</section>
<section id="create-an-nmma-environment">
<h2>Create an nmma environment<a class="headerlink" href="#create-an-nmma-environment" title="Permalink to this headline"></a></h2>
<p>We suggest to create a conda environment when running nmma, which will allow you to, for example, remove the environment in case things go wrong.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">nmma</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.8</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">nmma</span>
</pre></div>
</div>
<p>This will pin your python to version 3.8, change the number in case of upgrades. At this point, you can check that things worked here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">--</span><span class="n">version</span>
<span class="n">pip</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
</section>
<section id="installing-dependencies">
<h2>Installing dependencies<a class="headerlink" href="#installing-dependencies" title="Permalink to this headline"></a></h2>
<p>We first install mpi4py, which turns out to be one of the trickier dependencies for some reason.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">mpi4py</span>
</pre></div>
</div>
<p>or
pip install mpi4py</p>
<p>We then suggest installing bilby through conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">bilby</span>
</pre></div>
</div>
<p>and pip installing parallel_bilby</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">parallel_bilby</span>
</pre></div>
</div>
<p>Another possibility is to do it all in one go with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">parallel_bilby</span>
</pre></div>
</div>
<p>although that command hangs on certain systems.</p>
<p>The next hurdle is pymultinest, and again, we suggest using conda</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">pymultinest</span>
</pre></div>
</div>
<p>At this point, we should be able to use pip to install nmma’s remaining requirements, i.e.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>
</pre></div>
</div>
<p>For reasons that are not totally clearly, some modules like afterglowpy and dust_extinction might not be installed correctly in this step. If not, can simply run, for example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">afterglowpy</span>
</pre></div>
</div>
<p>and that should do it. If everything went well, importing nmma and its submodules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nmma</span>
<span class="kn">import</span> <span class="nn">nmma.em.analysis</span>
<span class="kn">import</span> <span class="nn">nmma.eos.create_injection</span>
</pre></div>
</div>
<p>should work and you should be good to go.</p>
</section>
<section id="dependency-conflicts">
<h2>Dependency conflicts<a class="headerlink" href="#dependency-conflicts" title="Permalink to this headline"></a></h2>
<p>Unfortunately, due to the web of package requirements that NMMA depends on, running setup.py does not typically finish without errors the first time through. Experience has shown that in the vast majority of cases, simply pinning versions such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">astropy</span><span class="o">==</span><span class="mf">4.3.1</span>
</pre></div>
</div>
<p>and then trying again is sufficient for completion of the installation. However, please open issues on GitHub if there appear to be unresolvable conflicts.</p>
</section>
<section id="installation-on-expanse-and-other-cluster-resources">
<h2>Installation on expanse and other cluster resources<a class="headerlink" href="#installation-on-expanse-and-other-cluster-resources" title="Permalink to this headline"></a></h2>
<p>When installation on cluster resources, it is common that all modules required for installing NMMA out of the box are not available. However, most will make it possible to import the required modules (most commonly, these are software like gfortran or mpi).</p>
<p>For example, on XSEDE’s Expanse cluster, one can start a terminal session with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">sdsc</span>
<span class="n">module</span> <span class="n">load</span> <span class="n">openmpi</span>
</pre></div>
</div>
<p>and follow the instructions above.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="The Nuclear Multimessenger Astronomy (NMMA) framework" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="fitting.html" class="btn btn-neutral float-right" title="Light curve fitting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, The SkyPortal Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>